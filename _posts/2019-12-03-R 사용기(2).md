---
layout: post
title:  "R 사용기(2)"
date:   2019-12-03 22:55:59
author: ivoryRabbit
categories: 연구
comments: true
tag: R
---

### R을 처음 시작했을 때

기억을 더듬어보면, 나는 R을 Python보다 훨씬 일찍 사용하였다. 2014년도로 거슬러 올라가면 한 수리통계학 수업에서 R을 이용하여 몬테카를로 시뮬레이션을 실습하는 장면이 떠오른다. 당시 통계학 교수님은 원을 중심으로한 넓이가 1인 정사각형 안에 내접원을 그린 후에 원주율 Pi를 근사하기 위하여 점을 막 찍어대었다. 그 기억 속의 R은 매우 촌스러웠다. 지금 흔히 사용하는 R studio가 아닌 R console 창을 띄워놓고 1000개의 점을 찍는 모습을 목격했고, 바로 R을 사용하지 않기로 마음먹었다. 지금도 될법한(?) 코드를 짜서 작동하지 않으면 alt + F4를 누르고 싶은 충동이 들곤 한다.



### R을 이용한 타이타닉 생존 분석


```R
library(titanic)
library(tidyr)
library(dplyr)
library(stringr)
library(ggplot2)

titanic_train %>% 
  names()
titanic_test %>% 
  names()

titanic_train %>% 
  select(-Survived) %>% 
  rbind(titanic_test) ->
  titanic_df

# Pclass
titanic_df %>% 
  select(Pclass) %>% 
  unique()

titanic_df %>%
  mutate(Pclass = as.factor(Pclass)) %>% 
  group_by(Pclass) %>% 
  summarise(
    cnt = n()
  ) %>% 
  ggplot(aes(x = Pclass, y = cnt, fill = factor(Pclass))) + 
  geom_col(width = .5, show.legend = F) + 
  ylab('Popular')

# Sex
titanic_df %>%
  group_by(Sex) %>% 
  summarise(
    cnt = n()
  ) %>% 
  ggplot(aes(x = Sex, y = cnt, fill = factor(Sex))) + 
  geom_col(width = .5, show.legend = F) + 
  ylab('Popular')

# Sex with Survival
titanic_train %>% 
  mutate(Survived = factor(Survived)) %>% 
  group_by(Survived, Sex) %>% 
  summarise(
    cnt = n()
  ) %>% 
  ggplot(aes(x = Survived, y = cnt, fill = Sex)) +
  geom_col(width = .5, position = 'dodge') + 
  ylab('Popular') +
  scale_x_discrete(
    labels = c('1' = 'Survived', '0' = 'Dead')
  )
  
```

### 데이터 분석

독립변수 | 종속변수 | 분석방법
:-- | :-- | --:
범주형 | 범주형 | 카이제곱검정
범주형 | 연속형 | t - 검정 / 분산분석(ANOVA)
연속형 | 범주형 | 로지스틱 회귀분석 / Softmax
연속형 | 연속형 | 선형 / 다중 회귀분석 / 구조방정식
범주형 + 연속형 | 범주형 | 로지스틱 회귀분석 / Decision Tree 기반 학습
범주형 + 연속형 | 연속형 | 공분산분석(ANCOVA)

