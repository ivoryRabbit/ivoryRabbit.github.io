---
layout: post
title: "SQL사용기"
date: 2020-02-11 23:15:59
author: ivoryRabbit
categories: 개발
comments: true
tag: SQL
---

# SQL

최근까지 Oracle을 이용하여 데이터를 추출하면서 많은 시련들이 있었다. 내가 업무를 하는동안 SQL을 데이터 추출하는 용도만 써왔기 때문에 SQL의 정확한 언어나 개념을 잘 알지 못하고 얘기하는 것일 수도 있다.

처음에는 정보처리기사 책으로 DBMS를 공부할까 했는데 너무 설명이 거북해서 오라클 기본 책과 튜닝 책 한권씩 읽었다. 어느정도 경험이 쌓이면서 겪었던 시련들을 가장 괴로웠던 순서대로 나열하면 다음과 같다.

1. 조인(join)
  - Inner join이나 outer join의 개념이 어렵다든가 하는 문제가 아니다. 두 table이 PK-FK 관계를 갖지 않아 다른 논리적 연산을 끌어다가 relation을 억지로 만들어야 하는 경우가 있다. 레이저 센서가 한번에 많은 양의 데이터를 전송하지 못하는 기술적인 문제인지 아니면 임베디드시스템과 데이터베이스를 설계하면서 놓친 것인지 알 수 없지만, 아무튼 FK를 가져아할 table에 FK가 없어서 join하는 것이 쉽지 않았다.
  
  - 그래서 데이터가 전송된 일시와 거리를 계산하여, FK를 가져야할 table에 PK를 갖고 있는 table을 left join하면서 rank() 함수로 candidate들의 순위를 매겼다. 시간차와 거리차가 가장 작은 데이터를 join시키면서 동시에 터지는 다른 시련들이 나를 더 힘들게 했다.

2. 작성중..

3. 찌꺼기
  - 데이스베이스가 운영되오면서 예전에는 사용했지만 현재는 사용하지 않는 column 및 noise가 섞인 row들은 쿼리를 짜면서 각종 case문제들을 야기했다. 
  
4. 효율
  - 수학에서든 컴공에서든 time complexity는 언제나 문제다.

5. 열악한 환경
  - 로그데이터 개수에 비해 형편없는 서버속도
  
6. GPS
  - 튀는 GPS 값때문에 aggregation하기가 너무 무서울 때가 있다.
